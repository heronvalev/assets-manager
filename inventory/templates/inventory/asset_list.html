{% extends "base.html" %}

{% block title %}Assets{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
    <h2>Assets</h2>
    <a href="{% url 'create_asset' %}" class="btn btn-primary">Add Asset</a>
</div>
<div class="table-responsive">
    <table class="table table-bordered table-striped align-middle">
        <thead class="table-header">
            <tr>
                <th>Name</th>
                <th>Category</th>
                <th>Brand</th>
                <th>Model</th>
                <th>Serial Number</th>
                <th>Purchase Date</th>
                <th>Status</th>
                <th>Notes</th>
                <th>Currently Assigned?</th>
                <th>Current Location</th>
            </tr>
        </thead>
        <tbody>
            {% for asset in assets %}
            <tr>
                <td>
                    <a href="{% url 'asset_details' asset.id %}">{{ asset.name }}</a>
                </td>

                <td>{{ asset.category }}</td>
                <td>{{ asset.brand }}</td>
                <td>{{ asset.model }}</td>
                <td>{{ asset.serial_number }}</td>
                <td>{{ asset.purchase_date }}</td>
                <td>{{ asset.status }}</td>
                <td>{{ asset.notes }}</td>
                <td>
                    {% if asset.is_assigned %}
                        {% if asset.get_current_user %}
                            <a href="{% url 'user_assignments' asset.get_current_user.id %}">
                                {{ asset.get_current_user.upn }}
                            </a>
                        {% else %}
                        Team/Room
                        {% endif %}
                    {% else %}
                        Unassigned
                    {% endif %}
                </td>

                <td>{{ asset.get_current_location }}</td>
            </tr>
            {% empty %}
            <tr><td colspan="11">No assets found.</td></tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}

